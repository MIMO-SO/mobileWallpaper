{"version":3,"sources":["webpack:///C:/Users/13056/Desktop/手机壁纸小程序/components/img-over/img-over.vue?4c0b","webpack:///C:/Users/13056/Desktop/手机壁纸小程序/components/img-over/img-over.vue?6200","webpack:///C:/Users/13056/Desktop/手机壁纸小程序/components/img-over/img-over.vue?4cd3","webpack:///C:/Users/13056/Desktop/手机壁纸小程序/components/img-over/img-over.vue?821d","uni-app:///components/img-over/img-over.vue","webpack:///C:/Users/13056/Desktop/手机壁纸小程序/components/img-over/img-over.vue?caad","webpack:///C:/Users/13056/Desktop/手机壁纸小程序/components/img-over/img-over.vue?f5f3"],"names":["props","src","type","default","isScale","minZoom","maxZoom","data","imgEl","initialScale","currentScale","mounted","self","methods","imgPositionAdjust","img","onload","getCriticalX","getCriticalY","handleMultipointStart","handlePressMove","e","el","handleTouchEnd","handleDoubleTap","handlePinch","reset","ease"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACa;;;AAGpE;AAC+K;AAC/K,gBAAgB,wLAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAopB,CAAgB,yqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACQxqB;;;;;;;AADA;AAAA,gBAEA;EACAA;IACAC;MACAC;MACAC;QACA;MACA;IACA;IACAC;MACAF;MACAC;QACA;MACA;IACA;IACAE;MACAH;MACAC;IACA;IACAG;MACAJ;MACAC;IACA;EACA;EACAI;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;MACAC;MACAA;MACAA;MACA;MACA;MACA;MACA;QACAA;MACA;QACAA;QACA;MACA;QACAA;QACA;MACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACAC;QACAC;QACAD;QACAA;MACA;MACAA;IACA;IACAE;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACAC;MACA;QACAC;QACAA;QACA;QACA;MACA;MAEA,IACAA,uCACAA,qCACA;QACA;QACAA;QACA;MACA;MAEA;MACA;;MAEA;MACA;MACA;MAEA;QACAA;QACA;MACA;MACA;QACAA;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;MACA;MAEA;QACA,gBACAD,IACA,UACA,kCACA,KACA,UACA;QACA,gBACAA,IACA,UACA,kCACA,KACA,UACA;MACA;MACA;MACA;MAEA;QACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;MAEA;QACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAE;MACA;MACA;MAEA;QACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;AChMA;AAAA;AAAA;AAAA;AAA07B,CAAgB,o7BAAG,EAAC,C;;;;;;;;;;;ACA98B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/img-over/img-over.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./img-over.vue?vue&type=template&id=7a00bbc4&\"\nvar renderjs\nimport script from \"./img-over.vue?vue&type=script&lang=js&\"\nexport * from \"./img-over.vue?vue&type=script&lang=js&\"\nimport style0 from \"./img-over.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/img-over/img-over.vue\"\nexport default component.exports","export * from \"-!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./img-over.vue?vue&type=template&id=7a00bbc4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./img-over.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./img-over.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"img-vuer\" v-transform v-finger:pinch=\"handlePinch\" v-finger:doubleTap=\"handleDoubleTap\" v-finger:multipointStart=\"handleMultipointStart\" v-finger:pressMove=\"handlePressMove\" v-finger:touchEnd=\"handleTouchEnd\">\n        <img style=\"position:absolute;\" v-transform :src=\"src\">\n    </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport To from './to';\nexport default {\n    props: {\n        src: {\n            type: String,\n            default() {\n                return '';\n            }\n        },\n        isScale: {\n            type: Boolean,\n            default() {\n                return false;\n            }\n        },\n        minZoom: {\n            type: [Number, String],\n            default: 1\n        },\n        maxZoom: {\n            type: [Number, String],\n            default: 6\n        }\n    },\n    data() {\n        return {\n            imgEl: null,\n            initialScale: 1,\n            currentScale: 1\n        };\n    },\n    mounted() {\n        if (!this.src) return false;\n        let self = this;\n        this.imgPositionAdjust(function(w, h) {\n            self.imgEl = this;\n            self.imgHeight = h;\n            self.imgWidth = w;\n            this.style.left = (window.innerWidth - w) / 2 + 'px';\n            this.style.top = (window.innerHeight - h) / 2 + 'px';\n            this.parentNode.style.display = 'block';\n            if (w < window.innerWidth && h < window.innerHeight) {\n                self.isScale = true;\n            } else if (window.innerWidth / window.innerHeight < w / h) {\n                self.initialScale = window.innerWidth / w;\n                this.scaleX = this.scaleY = self.initialScale;\n            } else {\n                self.initialScale = window.innerHeight / h;\n                this.scaleX = this.scaleY = self.initialScale;\n            }\n        });\n    },\n    methods: {\n        imgPositionAdjust(onload) {\n            let img = new Image();\n            let imgEl = this.$el.lastChild;\n            img.onload = function() {\n                onload.call(imgEl, this.width, this.height);\n                img.onload = null;\n                img = null;\n            };\n            img.src = this.src;\n        },\n        getCriticalX(scale) {\n            // 获取横向临界值\n            return (this.imgWidth * scale - window.innerWidth) / 2;\n        },\n        getCriticalY(scale) {\n            // 获取纵向临界值\n            return (this.imgHeight * scale - window.innerHeight) / 2;\n        },\n        handleMultipointStart(e) {\n            this.currentScale = this.imgEl.scaleX;\n        },\n        handlePressMove(e) {\n            let el = this.imgEl;\n            e.preventDefault();\n            if (this.isScale) {\n                el.translateX += e.deltaX / 3;\n                el.translateY += e.deltaY / 3;\n                this.$emit('enableSwipe');\n                return;\n            }\n\n            if (\n                el.scaleX / this.initialScale < 1.2 &&\n                el.scaleX / this.initialScale > 0.8\n            ) {\n                this.$emit('enableSwipe');\n                el.translateX += e.deltaX / 3;\n                return;\n            }\n\n            let criticalX = this.getCriticalX(el.scaleX);\n            let criticalY = this.getCriticalY(el.scaleY);\n\n            // 实现超过临界值移动速度减缓\n            let slowX = el.translateX > criticalX || el.translateX < -criticalX;\n            let slowY = el.translateY > criticalY || el.translateY < -criticalY;\n\n            if (slowX) {\n                el.translateX += e.deltaX / 3;\n                this.$emit('enableSwipe');\n            } else el.translateX += e.deltaX;\n            if (slowY) {\n                el.translateY += e.deltaY / 3;\n            } else el.translateY += e.deltaY;\n        },\n        handleTouchEnd(e) {\n            let el = this.imgEl;\n            if (this.isScale || el.scaleX / this.initialScale < this.minZoom) {\n                this.reset();\n                return;\n            }\n\n            if (el.scaleX / this.initialScale > this.maxZoom) {\n                new To(\n                    el,\n                    'scaleX',\n                    this.initialScale * this.maxZoom,\n                    500,\n                    this.ease\n                );\n                new To(\n                    el,\n                    'scaleY',\n                    this.initialScale * this.maxZoom,\n                    500,\n                    this.ease\n                );\n            }\n            let criticalX = this.getCriticalX(el.scaleX);\n            let criticalY = this.getCriticalY(el.scaleY);\n\n            if (window.innerHeight >= this.imgHeight * el.scaleX) {\n                new To(el, 'translateY', 0, 500, this.ease);\n            } else {\n                if (el.translateY > criticalY) {\n                    new To(el, 'translateY', criticalY, 500, this.ease);\n                } else if (el.translateY < -criticalY) {\n                    new To(el, 'translateY', -criticalY, 500, this.ease);\n                }\n            }\n\n            if (window.innerWidth >= this.imgWidth * el.scaleY) {\n                new To(el, 'translateX', 0, 500, this.ease);\n            } else {\n                if (el.translateX > criticalX) {\n                    new To(el, 'translateX', criticalX, 500, this.ease);\n                } else if (el.translateX < -criticalX) {\n                    new To(el, 'translateX', -criticalX, 500, this.ease);\n                }\n            }\n        },\n        handleDoubleTap(e) {\n            let el = this.imgEl;\n            if (this.isScale) return;\n\n            if (this.imgEl.scaleX !== this.initialScale) {\n                this.reset();\n            } else {\n                let box = el.getBoundingClientRect();\n                let y = window.innerHeight / 2 - e.changedTouches[0].pageY;\n                let x = window.innerWidth / 2 - e.changedTouches[0].pageX;\n                new To(el, 'scaleX', this.initialScale * 2, 500, this.ease);\n                new To(el, 'scaleY', this.initialScale * 2, 500, this.ease);\n                new To(el, 'translateX', x, 500, this.ease);\n                new To(el, 'translateY', y, 500, this.ease);\n            }\n        },\n        handlePinch(e, el) {\n            this.imgEl.scaleX = this.imgEl.scaleY = this.currentScale * e.zoom;\n        },\n        reset() {\n            if (!this.imgEl) return;\n            new To(this.imgEl, 'scaleX', this.initialScale, 500, this.ease);\n            new To(this.imgEl, 'scaleY', this.initialScale, 500, this.ease);\n            new To(this.imgEl, 'translateX', 0, 500, this.ease);\n            new To(this.imgEl, 'translateY', 0, 500, this.ease);\n        },\n        ease(x) {\n            return Math.sqrt(1 - Math.pow(x - 1, 2));\n        }\n    }\n};\n</script>\n\n<style>\n.img-vuer {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    display: none;\n}\n</style>\n","import mod from \"-!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./img-over.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\SoftWare\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./img-over.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1694956928321\n      var cssReload = require(\"D:/SoftWare/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}